<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Anzio Basket Scoreboard</title>
<style>
  :root {
    --barW: 1280px;
    --white: #f6f8fc;
    --muted: #a6b7d2;
    --cyan: #39d5ff;
    --danger: #ff5575;
    --lime: #78ffb3;
    --amber: #ffc44d;
  }

  html,body{
    margin:0;
    height:100%;
    background:transparent;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif;
    color:var(--white);
  }

  /* ===== Wrapper ===== */
 .bar-wrap{
  position:fixed;
  left:50%;
  bottom:2px;
  transform:translateX(-50%);
  width:var(--barW);
  height:110px;                  /* ← leggermente più alta */
  pointer-events:none;
  z-index:100;
}

  /* ===== Scorebar ===== */
 .scorebar{
  position:relative;
  width:100%;
  height:100%;
  border-radius:14px 14px 0 0;
  display:grid;
  grid-template-columns: 460px 1px 340px 1px 460px;
  align-items:center;
  justify-items:center;
  padding:10px 20px 8px 20px;
  box-sizing:border-box;
  background: rgba(10, 25, 45, 0.85);
  backdrop-filter: blur(6px);
  overflow:hidden;
}

.scorebar::before{
  content:"";
  position:absolute;
  inset:0;
  background: url('https://rflbrescia-netizen.github.io/anzio_scoreboard/background.png') center/cover no-repeat;
  opacity:0.40;
  z-index:0;
}

.scorebar,
.team,
.center {
  align-items: center;
}

.scorebar,
.scorebar * {
  text-transform: uppercase;
}

.name,
.score,
.pill,
.chip,
.brand,
.clock {
  line-height: 1;
}

.team,
.team.right {
  align-items: center;
}

.scorebar * {
  margin-top: 0;
  margin-bottom: 0;
}

.pill{
  display: flex;               /* NEW */
  align-items: center;         /* NEW */
  gap: 6px;                    /* NEW: spazio tra 'Falli', numero e dot */
  font-size: 15px;
  font-weight: 900;
  letter-spacing: 0.5px;
  padding: 6px 10px;
  border-radius: 10px;
  background: rgba(255,255,255,.10);
  color: #eaf7ff;
  box-shadow: inset 0 0 0 1px rgba(169,236,255,.25);
}
  /* Separator */
  .sep{
    width:1px;
    height:46px;
    background:rgba(255,255,255,0.15);
    z-index:1;
  }

  /* === Team blocks === */
.team{
  display:grid;
  grid-template-columns: 60px 1fr 86px auto;
  grid-template-areas: "logo name score meta";
  gap:8px;
  align-items:center;           /* ← centrati rispetto al box */
  position:relative;
  z-index:1;
}

.team.right{
  grid-template-columns: auto 86px 1fr 60px;
  grid-template-areas: "meta score name logo";
  justify-items:end;
  align-items:center;
}

  .logo{
  grid-area:logo;
  width:60px;
  height:60px;
  border-radius:10px;
  overflow:hidden;
  background:#0e2752;
  display:grid;
  place-items:center;
  box-shadow: inset 0 0 0 1px rgba(169,236,255,.22);
  margin:0 5px;   /* ← aggiunto margine di sicurezza */
}
.logo img {
  display: block;             /* <— fondamentale */
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

  .name{
    grid-area:name;
    font-weight:1000;
    letter-spacing:.6px;
    text-transform:uppercase;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    font-size:30px;
    text-shadow:0 1px 2px rgba(0,0,0,.6);
  }

  .score{
    grid-area:score;
    font-weight:1000;
    font-size:42px;
    line-height:1;
    display:flex;
    align-items:center;
    justify-content:center;
    min-width:80px;
    height:52px;
    border-radius:12px;
    background:rgba(255,255,255,.08);
    color:var(--cyan);
    text-shadow:0 0 10px rgba(57,213,255,.6);
  }

  .meta{
    grid-area:meta;
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    gap:3px;
    font-weight:800;
    color:var(--muted);
  }
  .team.right .meta{align-items:flex-start;}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  box-shadow: 0 0 3px currentColor;
}
  .dot.foul{background:var(--danger);}
  .dot.bonus{background:var(--lime);}
  .dot.poss{background:var(--amber);}

  /* === Center === */
.center{
  position:relative;
  display:grid;
  align-items:center;           /* ← centrato verticalmente */
  justify-items:center;
  gap:4px;
  min-width:320px;
  z-index:1;
}
  .brand{
    font-weight:1000;
    font-size:16px;
    letter-spacing:1.5px;
    text-transform:uppercase;
    color:#DDF9FF;
    text-shadow: 0 0 10px rgba(57,213,255,0.9), 0 0 20px rgba(57,213,255,0.6);
  }
  .clock{
    font-weight:1000;
    font-size:46px;
    color:#eaf7ff;
    text-shadow:0 0 10px rgba(57,213,255,.85);
  }
  .center-meta{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:12px;
  }
  .chip{
    display:flex;
    align-items:center;
    gap:6px;
    padding:6px 10px;
    border-radius:999px;
    background:rgba(255,255,255,.08);
    font-size:15px;
    font-weight:900;
letter-spacing: 0.4px;
  color: #eaf7ff;
  }

</style>
</head>
<body>

<div class="bar-wrap">
  <article class="scorebar">
    <!-- Team A -->
    <div class="team">
      <div class="logo"><img src="" id="logoA"></div>
      <div class="name" id="nameA">Anzio</div>
      <div class="score" id="scoreA">0</div>
      <div class="meta">
  <div class="pill"><span class="label">Falli</span><span id="foulsA">0</span><span class="dot foul"></span></div>
  <div class="pill" id="bonusAwrap"><span class="label">Bonus</span><span class="dot bonus"></span></div>
  <div class="pill" id="possAwrap"><span class="label">Poss</span><span class="dot poss"></span></div>
</div>
    </div>

    <div class="sep"></div>

    <!-- Center -->
    <div class="center">
      <div class="brand">ANZIO BASKET FANS WEB TV</div>
      <div class="clock" id="gameClock">12:00</div>
      <div class="center-meta">
        <div class="chip"><span>Tempo</span><span id="period">1</span></div>
        <div class="chip"><span>Shot</span><span id="shotClock">24</span></div>
        <div class="chip"><span>Time Out</span><span id="timeouts">7</span></div>
      </div>
    </div>

    <div class="sep"></div>

    <!-- Team B -->
    <div class="team right">
      <div class="meta">
  <div class="pill" id="possBwrap"><span class="label">Poss</span><span class="dot poss"></span></div>
  <div class="pill" id="bonusBwrap"><span class="label">Bonus</span><span class="dot bonus"></span></div>
  <div class="pill"><span class="label">Falli</span><span id="foulsB">0</span><span class="dot foul"></span></div>
</div>
      <div class="score" id="scoreB">0</div>
      <div class="name" id="nameB">Ospiti</div>
      <div class="logo"><img src="" id="logoB"></div>
    </div>
  </article>
</div>

</body>
</html>


  <!-- Firebase (modular v10+) -->
 <script type="module">
  // Config (uguale al controller)
  const firebaseConfig = {
    apiKey: "AIzaSyDxuUUK8xbO50mERK2hU6xxwgBW9tf10wI",
    authDomain: "anzio-scoreboard.firebaseapp.com",
    databaseURL: "https://anzio-scoreboard-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "anzio-scoreboard",
    storageBucket: "anzio-scoreboard.firebasestorage.app",
    messagingSenderId: "1070047467007",
    appId: "1:1070047467007:web:eebd383f3f45f7943483ca",
    measurementId: "G-HJB4DC7GN7"
  };

  const GAME_ID = new URLSearchParams(location.search).get('game') || 'anzio-scoreboard-3d8bb';

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const app = initializeApp(firebaseConfig);
  const db  = getDatabase(app);
  const stateRef = ref(db, `games/${GAME_ID}/state`);

  const $ = sel => document.querySelector(sel);
  const els = {
    nameA: $('#nameA'), nameB: $('#nameB'),
    logoA: $('#logoA'), logoB: $('#logoB'),
    scoreA: $('#scoreA'), scoreB: $('#scoreB'),
    foulsA: $('#foulsA'), foulsB: $('#foulsB'),
    bonusAwrap: $('#bonusAwrap'), bonusBwrap: $('#bonusBwrap'),
    possAwrap: $('#possAwrap'), possBwrap: $('#possBwrap'),
    period: $('#period'), timeouts: $('#timeouts'),
    gameClock: $('#gameClock'), shotClock: $('#shotClock')
  };

  const state = {
    nameA:'Home', nameB:'Away', logoA:'', logoB:'',
    scoreA:0, scoreB:0, foulsA:0, foulsB:0, bonusA:false, bonusB:false,
    period:1, timeouts:7, gameClockMS:12*60*1000, shotClock:24, poss:null
  };

  function fmtClock(ms){
    const neg = ms<0; const abs=Math.abs(ms);
    const m=Math.floor(abs/60000), s=Math.floor((abs%60000)/1000);
    const t=`${m}:${s.toString().padStart(2,'0')}`; return neg?`-${t}`:t;
  }

  function render(){
    els.nameA.textContent=state.nameA; els.nameB.textContent=state.nameB;
    els.scoreA.textContent=state.scoreA; els.scoreB.textContent=state.scoreB;
    els.foulsA.textContent=state.foulsA; els.foulsB.textContent=state.foulsB;
    els.period.textContent=state.period; els.timeouts.textContent=state.timeouts;
    els.shotClock.textContent=state.shotClock;
    els.logoA.src=state.logoA||''; els.logoB.src=state.logoB||'';
    if(els.bonusAwrap) els.bonusAwrap.style.opacity=state.bonusA?1:.35;
    if(els.bonusBwrap) els.bonusBwrap.style.opacity=state.bonusB?1:.35;
    if(els.possAwrap)  els.possAwrap.style.opacity = state.poss==='A'?1:.3;
    if(els.possBwrap)  els.possBwrap.style.opacity = state.poss==='B'?1:.3;
    els.gameClock.textContent=fmtClock(state.gameClockMS);
  }
  render();

  onValue(stateRef, (snap)=>{
    const v = snap.val();
    if(!v) return;
    Object.assign(state, v);
    render();
  });
</script>
</body>
</html>
